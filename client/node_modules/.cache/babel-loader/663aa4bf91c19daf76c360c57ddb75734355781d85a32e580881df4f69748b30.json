{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import PublicBeltSection from'./components/PublicBeltSection';import'./PublicApp.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PublicApp(){const[syllabusData,setSyllabusData]=useState({});const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[searchTerm,setSearchTerm]=useState('');const[selectedBelt,setSelectedBelt]=useState('all');useEffect(()=>{fetchSyllabus();},[]);const fetchSyllabus=async()=>{try{setLoading(true);const response=await axios.get('/api/syllabus');setSyllabusData(response.data);}catch(error){console.error('Error fetching syllabus:',error);setError('Error loading syllabus data');}finally{setLoading(false);}};const filteredSyllabus=()=>{let filtered=syllabusData;// Filter by selected belt\nif(selectedBelt!=='all'){filtered={[selectedBelt]:syllabusData[selectedBelt]};}// Filter by search term\nif(searchTerm.trim()){const searchLower=searchTerm.toLowerCase();const result={};Object.entries(filtered).forEach(_ref=>{let[belt,categories]=_ref;const filteredCategories={};let hasMatch=false;Object.entries(categories).forEach(_ref2=>{let[category,items]=_ref2;const filteredItems=items.filter(item=>{if(item.traditional&&item.traditional.toLowerCase().includes(searchLower))return true;if(item.english&&item.english.toLowerCase().includes(searchLower))return true;if(item.name&&item.name.toLowerCase().includes(searchLower))return true;if(item.requirements&&item.requirements.some(req=>req.toLowerCase().includes(searchLower)))return true;return false;});if(filteredItems.length>0){filteredCategories[category]=filteredItems;hasMatch=true;}});if(hasMatch){result[belt]=filteredCategories;}});return result;}return filtered;};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"public-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading syllabus...\"})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"public-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error})});}const beltOptions=Object.keys(syllabusData);const filteredData=filteredSyllabus();return/*#__PURE__*/_jsxs(\"div\",{className:\"public-container\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"public-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-content\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/pkr_logo.webp\",alt:\"PKR Logo\",className:\"logo\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-text\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Karate Belt Grading Requirements\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Progressive Shotokan Syllabus\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"controls\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"search-section\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search techniques, kata, or requirements...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"search-input\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-section\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"belt-filter\",children:\"Filter by Belt:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"belt-filter\",value:selectedBelt,onChange:e=>setSelectedBelt(e.target.value),className:\"belt-filter\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Belts\"}),beltOptions.map(belt=>/*#__PURE__*/_jsx(\"option\",{value:belt,children:belt},belt))]})]})]}),Object.keys(filteredData).length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"no-results\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"No results found for \\\"\",searchTerm,\"\\\"\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSearchTerm(''),className:\"btn btn-primary\",children:\"Clear Search\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"syllabus-content\",children:Object.entries(filteredData).map(_ref3=>{let[belt,categories]=_ref3;return/*#__PURE__*/_jsx(PublicBeltSection,{belt:belt,categories:categories,searchTerm:searchTerm},belt);})}),/*#__PURE__*/_jsxs(\"footer\",{className:\"public-footer\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\xA9 Peninsula Karate 2025\"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/admin\",className:\"admin-link\",children:\"Admin Access\"})})]})]});}export default PublicApp;","map":{"version":3,"names":["React","useState","useEffect","axios","PublicBeltSection","jsx","_jsx","jsxs","_jsxs","PublicApp","syllabusData","setSyllabusData","loading","setLoading","error","setError","searchTerm","setSearchTerm","selectedBelt","setSelectedBelt","fetchSyllabus","response","get","data","console","filteredSyllabus","filtered","trim","searchLower","toLowerCase","result","Object","entries","forEach","_ref","belt","categories","filteredCategories","hasMatch","_ref2","category","items","filteredItems","filter","item","traditional","includes","english","name","requirements","some","req","length","className","children","beltOptions","keys","filteredData","src","alt","type","placeholder","value","onChange","e","target","htmlFor","id","map","onClick","_ref3","href"],"sources":["/Users/lloydhird/development/PKSyllabus/client/src/PublicApp.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport PublicBeltSection from './components/PublicBeltSection';\nimport './PublicApp.css';\n\nfunction PublicApp() {\n  const [syllabusData, setSyllabusData] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedBelt, setSelectedBelt] = useState('all');\n\n  useEffect(() => {\n    fetchSyllabus();\n  }, []);\n\n  const fetchSyllabus = async () => {\n    try {\n      setLoading(true);\n      const response = await axios.get('/api/syllabus');\n      setSyllabusData(response.data);\n    } catch (error) {\n      console.error('Error fetching syllabus:', error);\n      setError('Error loading syllabus data');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const filteredSyllabus = () => {\n    let filtered = syllabusData;\n    \n    // Filter by selected belt\n    if (selectedBelt !== 'all') {\n      filtered = { [selectedBelt]: syllabusData[selectedBelt] };\n    }\n    \n    // Filter by search term\n    if (searchTerm.trim()) {\n      const searchLower = searchTerm.toLowerCase();\n      const result = {};\n      \n      Object.entries(filtered).forEach(([belt, categories]) => {\n        const filteredCategories = {};\n        let hasMatch = false;\n        \n        Object.entries(categories).forEach(([category, items]) => {\n          const filteredItems = items.filter(item => {\n            if (item.traditional && item.traditional.toLowerCase().includes(searchLower)) return true;\n            if (item.english && item.english.toLowerCase().includes(searchLower)) return true;\n            if (item.name && item.name.toLowerCase().includes(searchLower)) return true;\n            if (item.requirements && item.requirements.some(req => req.toLowerCase().includes(searchLower))) return true;\n            return false;\n          });\n          \n          if (filteredItems.length > 0) {\n            filteredCategories[category] = filteredItems;\n            hasMatch = true;\n          }\n        });\n        \n        if (hasMatch) {\n          result[belt] = filteredCategories;\n        }\n      });\n      \n      return result;\n    }\n    \n    return filtered;\n  };\n\n  if (loading) {\n    return (\n      <div className=\"public-container\">\n        <div className=\"loading\">Loading syllabus...</div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"public-container\">\n        <div className=\"error\">{error}</div>\n      </div>\n    );\n  }\n\n  const beltOptions = Object.keys(syllabusData);\n  const filteredData = filteredSyllabus();\n\n  return (\n    <div className=\"public-container\">\n      <header className=\"public-header\">\n        <div className=\"header-content\">\n          <img src=\"/pkr_logo.webp\" alt=\"PKR Logo\" className=\"logo\" />\n          <div className=\"header-text\">\n            <h1>Karate Belt Grading Requirements</h1>\n            <p>Progressive Shotokan Syllabus</p>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"controls\">\n        <div className=\"search-section\">\n          <input\n            type=\"text\"\n            placeholder=\"Search techniques, kata, or requirements...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"search-input\"\n          />\n        </div>\n        \n        <div className=\"filter-section\">\n          <label htmlFor=\"belt-filter\">Filter by Belt:</label>\n          <select\n            id=\"belt-filter\"\n            value={selectedBelt}\n            onChange={(e) => setSelectedBelt(e.target.value)}\n            className=\"belt-filter\"\n          >\n            <option value=\"all\">All Belts</option>\n            {beltOptions.map(belt => (\n              <option key={belt} value={belt}>{belt}</option>\n            ))}\n          </select>\n        </div>\n      </div>\n\n      {Object.keys(filteredData).length === 0 ? (\n        <div className=\"no-results\">\n          <p>No results found for \"{searchTerm}\"</p>\n          <button onClick={() => setSearchTerm('')} className=\"btn btn-primary\">\n            Clear Search\n          </button>\n        </div>\n      ) : (\n        <div className=\"syllabus-content\">\n          {Object.entries(filteredData).map(([belt, categories]) => (\n            <PublicBeltSection\n              key={belt}\n              belt={belt}\n              categories={categories}\n              searchTerm={searchTerm}\n            />\n          ))}\n        </div>\n      )}\n\n      <footer className=\"public-footer\">\n        <p>Â© Peninsula Karate 2025</p>\n        <p>\n          <a href=\"/admin\" className=\"admin-link\">Admin Access</a>\n        </p>\n      </footer>\n    </div>\n  );\n}\n\nexport default PublicApp;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}