{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import BeltSection from'./components/BeltSection';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[syllabusData,setSyllabusData]=useState({});const[loading,setLoading]=useState(true);const[message,setMessage]=useState('');const[messageType,setMessageType]=useState('');useEffect(()=>{fetchSyllabus();},[]);const fetchSyllabus=async()=>{try{setLoading(true);const response=await axios.get('/api/syllabus');setSyllabusData(response.data);}catch(error){console.error('Error fetching syllabus:',error);setMessage('Error loading syllabus data');setMessageType('error');}finally{setLoading(false);}};const updateSyllabusData=(belt,category,newData)=>{setSyllabusData(prev=>({...prev,[belt]:{...prev[belt],[category]:newData}}));};const saveSyllabus=async()=>{try{setLoading(true);const response=await axios.post('/api/syllabus',syllabusData);setMessage(`Syllabus saved successfully! Backup: ${response.data.backup}`);setMessageType('success');}catch(error){var _error$response,_error$response2,_error$response2$data;console.error('Error saving syllabus:',error);if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){setMessage('Authentication required. Please log in.');}else if((_error$response2=error.response)!==null&&_error$response2!==void 0&&(_error$response2$data=_error$response2.data)!==null&&_error$response2$data!==void 0&&_error$response2$data.details){setMessage(`Validation error: ${error.response.data.details.join(', ')}`);}else{setMessage('Error saving syllabus');}setMessageType('error');}finally{setLoading(false);}};if(loading&&Object.keys(syllabusData).length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading syllabus data...\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"PKSyllabus Admin - Edit Syllabus\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Edit karate belt grading requirements. Changes are validated and backed up automatically.\"})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:`message ${messageType}`,children:message}),Object.entries(syllabusData).map(_ref=>{let[belt,categories]=_ref;return/*#__PURE__*/_jsx(BeltSection,{belt:belt,categories:categories,onUpdate:updateSyllabusData},belt);}),/*#__PURE__*/_jsx(\"div\",{className:\"save-section\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",onClick:saveSyllabus,disabled:loading,children:loading?'Saving...':'Save Syllabus'})})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","axios","BeltSection","jsx","_jsx","jsxs","_jsxs","App","syllabusData","setSyllabusData","loading","setLoading","message","setMessage","messageType","setMessageType","fetchSyllabus","response","get","data","error","console","updateSyllabusData","belt","category","newData","prev","saveSyllabus","post","backup","_error$response","_error$response2","_error$response2$data","status","details","join","Object","keys","length","className","children","entries","map","_ref","categories","onUpdate","onClick","disabled"],"sources":["/Users/lloydhird/development/PKSyllabus/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport BeltSection from './components/BeltSection';\nimport './App.css';\n\nfunction App() {\n  const [syllabusData, setSyllabusData] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [message, setMessage] = useState('');\n  const [messageType, setMessageType] = useState('');\n\n  useEffect(() => {\n    fetchSyllabus();\n  }, []);\n\n  const fetchSyllabus = async () => {\n    try {\n      setLoading(true);\n      const response = await axios.get('/api/syllabus');\n      setSyllabusData(response.data);\n    } catch (error) {\n      console.error('Error fetching syllabus:', error);\n      setMessage('Error loading syllabus data');\n      setMessageType('error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const updateSyllabusData = (belt, category, newData) => {\n    setSyllabusData(prev => ({\n      ...prev,\n      [belt]: {\n        ...prev[belt],\n        [category]: newData\n      }\n    }));\n  };\n\n  const saveSyllabus = async () => {\n    try {\n      setLoading(true);\n      const response = await axios.post('/api/syllabus', syllabusData);\n      setMessage(`Syllabus saved successfully! Backup: ${response.data.backup}`);\n      setMessageType('success');\n    } catch (error) {\n      console.error('Error saving syllabus:', error);\n      if (error.response?.status === 401) {\n        setMessage('Authentication required. Please log in.');\n      } else if (error.response?.data?.details) {\n        setMessage(`Validation error: ${error.response.data.details.join(', ')}`);\n      } else {\n        setMessage('Error saving syllabus');\n      }\n      setMessageType('error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading && Object.keys(syllabusData).length === 0) {\n    return (\n      <div className=\"container\">\n        <div className=\"loading\">Loading syllabus data...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container\">\n      <div className=\"header\">\n        <h1>PKSyllabus Admin - Edit Syllabus</h1>\n        <p>Edit karate belt grading requirements. Changes are validated and backed up automatically.</p>\n      </div>\n\n      {message && (\n        <div className={`message ${messageType}`}>\n          {message}\n        </div>\n      )}\n\n      {Object.entries(syllabusData).map(([belt, categories]) => (\n        <BeltSection\n          key={belt}\n          belt={belt}\n          categories={categories}\n          onUpdate={updateSyllabusData}\n        />\n      ))}\n\n      <div className=\"save-section\">\n        <button \n          className=\"btn btn-success\" \n          onClick={saveSyllabus}\n          disabled={loading}\n        >\n          {loading ? 'Saving...' : 'Save Syllabus'}\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}