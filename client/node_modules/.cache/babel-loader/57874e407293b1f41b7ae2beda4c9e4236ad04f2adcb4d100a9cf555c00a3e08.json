{"ast":null,"code":"import React,{useEffect}from'react';import PublicPairTable from'./PublicPairTable';import PublicApplicationSection from'./PublicApplicationSection';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PublicCategorySection=_ref=>{let{category,items=[],searchTerm='',currentBelt=''}=_ref;// Ensure category is a string and normalize it by removing any extra spaces or slashes\nconst normalizedCategory=(typeof category==='string'?category:'').replace(/\\s*\\/\\s*/g,' / ').trim();// Split the category into individual category names if it's a combined category\nconst categoryNames=normalizedCategory?normalizedCategory.split(' / ').map(cat=>cat.trim()):[];// Check if any of the categories in the combined name are pair categories\nconst isPairCategory=['Stances','Punches and Strikes','Blocks','Kicks','Kata','Basic Drills','Fighting Drills'].some(cat=>categoryNames.includes(cat));// Check if any of the categories in the combined name are application categories\nconst isApplicationCategory=['Application','Demonstration','Impact'].some(cat=>categoryNames.includes(cat));// If it's a combined category, we'll need to process items differently\nconst isCombinedCategory=categoryNames.length>1;// Removed debug logging for production\n// Process items to ensure consistent structure\nconst processedItems=(items||[]).filter(Boolean)// Remove any null/undefined items\n.map(item=>{// Ensure item has required fields and defaults\nconst processedItem={traditional:item.traditional||'',english:item.english||'',isCurrentBelt:item.isCurrentBelt!==false,// Default to true if not set\n_originBelt:item._originBelt||currentBelt||'unknown',...item// Spread any additional properties\n};return processedItem;});// Process items for combined categories\nconst processCombinedCategoryItems=(items,categoryName)=>{return items.filter(item=>{// If the item has a subCategory, check if it matches any of our category names\nif(item.subCategory){return categoryNames.some(cat=>item.subCategory.toLowerCase().includes(cat.toLowerCase()));}// If no subCategory, include it if it's in the main category\nreturn categoryNames.some(cat=>{var _item$category;return(_item$category=item.category)===null||_item$category===void 0?void 0:_item$category.toLowerCase().includes(cat.toLowerCase());});});};// Get the appropriate items based on category type\nconst getItemsToRender=()=>{if(isCombinedCategory){return processCombinedCategoryItems(processedItems,category);}return processedItems;};const itemsToRender=getItemsToRender();return/*#__PURE__*/_jsxs(\"div\",{className:\"public-category-section\",style:{marginBottom:'2rem'},children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"public-category-title\",style:{color:'#333',borderBottom:'2px solid #eee',paddingBottom:'0.5rem',marginBottom:'1rem',display:'flex',alignItems:'center',gap:'0.5rem',flexWrap:'wrap'},children:[normalizedCategory,isCombinedCategory&&/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'0.8em',backgroundColor:'#e3f2fd',color:'#0d47a1',padding:'0.2em 0.5em',borderRadius:'4px',fontWeight:'normal',display:'inline-flex',alignItems:'center',gap:'0.25em'},children:\"Combined Category\"})]}),isPairCategory&&/*#__PURE__*/_jsx(\"div\",{className:\"pair-table-container\",children:/*#__PURE__*/_jsx(PublicPairTable,{items:itemsToRender,searchTerm:searchTerm,currentBelt:currentBelt})}),isApplicationCategory&&/*#__PURE__*/_jsx(\"div\",{className:\"application-container\",children:/*#__PURE__*/_jsx(PublicApplicationSection,{items:itemsToRender,searchTerm:searchTerm,currentBelt:currentBelt})}),!isPairCategory&&!isApplicationCategory&&/*#__PURE__*/_jsxs(\"div\",{className:\"unsupported-category\",style:{backgroundColor:'#fff8e1',padding:'1rem',borderRadius:'4px',borderLeft:'4px solid #ffc107'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:'0 0 0.5rem 0',color:'#e65100'},children:\"Unsupported Category\"}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:0,color:'#5d4037'},children:[\"The \\\"\",normalizedCategory,\"\\\" category type is not yet supported in the public interface.\"]}),isCombinedCategory&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'0.5rem'},children:[/*#__PURE__*/_jsx(\"p\",{style:{margin:'0.5rem 0',fontSize:'0.9em'},children:\"This appears to be a combined category. Try viewing the individual categories instead:\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:'0.5rem',flexWrap:'wrap'},children:categoryNames.map((cat,idx)=>/*#__PURE__*/_jsx(\"span\",{style:{backgroundColor:'#e3f2fd',color:'#0d47a1',padding:'0.25em 0.5em',borderRadius:'4px',fontSize:'0.9em'},children:cat},idx))})]})]})]});};export default PublicCategorySection;","map":{"version":3,"names":["React","useEffect","PublicPairTable","PublicApplicationSection","jsx","_jsx","jsxs","_jsxs","PublicCategorySection","_ref","category","items","searchTerm","currentBelt","normalizedCategory","replace","trim","categoryNames","split","map","cat","isPairCategory","some","includes","isApplicationCategory","isCombinedCategory","length","processedItems","filter","Boolean","item","processedItem","traditional","english","isCurrentBelt","_originBelt","processCombinedCategoryItems","categoryName","subCategory","toLowerCase","_item$category","getItemsToRender","itemsToRender","className","style","marginBottom","children","color","borderBottom","paddingBottom","display","alignItems","gap","flexWrap","fontSize","backgroundColor","padding","borderRadius","fontWeight","borderLeft","margin","marginTop","idx"],"sources":["/Users/lloydhird/development/PKSyllabus/client/src/components/PublicCategorySection.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport PublicPairTable from './PublicPairTable';\nimport PublicApplicationSection from './PublicApplicationSection';\n\nconst PublicCategorySection = ({ category, items = [], searchTerm = '', currentBelt = '' }) => {\n  // Ensure category is a string and normalize it by removing any extra spaces or slashes\n  const normalizedCategory = (typeof category === 'string' ? category : '').replace(/\\s*\\/\\s*/g, ' / ').trim();\n  \n  // Split the category into individual category names if it's a combined category\n  const categoryNames = normalizedCategory ? normalizedCategory.split(' / ').map(cat => cat.trim()) : [];\n  \n  // Check if any of the categories in the combined name are pair categories\n  const isPairCategory = [\n    'Stances', 'Punches and Strikes', 'Blocks', 'Kicks', 'Kata', \n    'Basic Drills', 'Fighting Drills'\n  ].some(cat => categoryNames.includes(cat));\n\n  // Check if any of the categories in the combined name are application categories\n  const isApplicationCategory = [\n    'Application', 'Demonstration', 'Impact'\n  ].some(cat => categoryNames.includes(cat));\n  \n  // If it's a combined category, we'll need to process items differently\n  const isCombinedCategory = categoryNames.length > 1;\n\n  // Removed debug logging for production\n\n  // Process items to ensure consistent structure\n  const processedItems = (items || [])\n    .filter(Boolean) // Remove any null/undefined items\n    .map(item => {\n      // Ensure item has required fields and defaults\n      const processedItem = {\n        traditional: item.traditional || '',\n        english: item.english || '',\n        isCurrentBelt: item.isCurrentBelt !== false, // Default to true if not set\n        _originBelt: item._originBelt || currentBelt || 'unknown',\n        ...item // Spread any additional properties\n      };\n      \n      return processedItem;\n    });\n\n  // Process items for combined categories\n  const processCombinedCategoryItems = (items, categoryName) => {\n    return items.filter(item => {\n      // If the item has a subCategory, check if it matches any of our category names\n      if (item.subCategory) {\n        return categoryNames.some(cat => \n          item.subCategory.toLowerCase().includes(cat.toLowerCase())\n        );\n      }\n      // If no subCategory, include it if it's in the main category\n      return categoryNames.some(cat => \n        item.category?.toLowerCase().includes(cat.toLowerCase())\n      );\n    });\n  };\n\n  // Get the appropriate items based on category type\n  const getItemsToRender = () => {\n    if (isCombinedCategory) {\n      return processCombinedCategoryItems(processedItems, category);\n    }\n    return processedItems;\n  };\n\n  const itemsToRender = getItemsToRender();\n\n  return (\n    <div className=\"public-category-section\" style={{ marginBottom: '2rem' }}>\n      <h3 className=\"public-category-title\" style={{\n        color: '#333',\n        borderBottom: '2px solid #eee',\n        paddingBottom: '0.5rem',\n        marginBottom: '1rem',\n        display: 'flex',\n        alignItems: 'center',\n        gap: '0.5rem',\n        flexWrap: 'wrap'\n      }}>\n        {normalizedCategory}\n        {isCombinedCategory && (\n          <span style={{\n            fontSize: '0.8em',\n            backgroundColor: '#e3f2fd',\n            color: '#0d47a1',\n            padding: '0.2em 0.5em',\n            borderRadius: '4px',\n            fontWeight: 'normal',\n            display: 'inline-flex',\n            alignItems: 'center',\n            gap: '0.25em'\n          }}>\n            Combined Category\n          </span>\n        )}\n      </h3>\n      \n      {isPairCategory && (\n        <div className=\"pair-table-container\">\n          <PublicPairTable\n            items={itemsToRender}\n            searchTerm={searchTerm}\n            currentBelt={currentBelt}\n          />\n        </div>\n      )}\n      \n      {isApplicationCategory && (\n        <div className=\"application-container\">\n          <PublicApplicationSection\n            items={itemsToRender}\n            searchTerm={searchTerm}\n            currentBelt={currentBelt}\n          />\n        </div>\n      )}\n      \n      {!isPairCategory && !isApplicationCategory && (\n        <div className=\"unsupported-category\" style={{\n          backgroundColor: '#fff8e1',\n          padding: '1rem',\n          borderRadius: '4px',\n          borderLeft: '4px solid #ffc107'\n        }}>\n          <h4 style={{ margin: '0 0 0.5rem 0', color: '#e65100' }}>Unsupported Category</h4>\n          <p style={{ margin: 0, color: '#5d4037' }}>\n            The \"{normalizedCategory}\" category type is not yet supported in the public interface.\n          </p>\n          {isCombinedCategory && (\n            <div style={{ marginTop: '0.5rem' }}>\n              <p style={{ margin: '0.5rem 0', fontSize: '0.9em' }}>This appears to be a combined category. Try viewing the individual categories instead:</p>\n              <div style={{ display: 'flex', gap: '0.5rem', flexWrap: 'wrap' }}>\n                {categoryNames.map((cat, idx) => (\n                  <span key={idx} style={{\n                    backgroundColor: '#e3f2fd',\n                    color: '#0d47a1',\n                    padding: '0.25em 0.5em',\n                    borderRadius: '4px',\n                    fontSize: '0.9em'\n                  }}>\n                    {cat}\n                  </span>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PublicCategorySection;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}